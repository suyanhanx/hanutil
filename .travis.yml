language: node_js
node_js:
  - 8
addons:
  chrome: stable

cache:
  directories:
  - node_modules

after_success:
  - yarn add codeclimate-test-reporter coveralls codecov
  - codeclimate-test-reporter < coverage/lcov.info
  - cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
  - codecov

before_deploy:
  - yarn build
deploy:
  provider: npm
  email: "$NPM_EMAIL"
  api_key: "$NPM_TOKEN"
  skip_cleanup: true
  on:
    branch: master

